{"version":3,"sources":["img/logo36x36.png","img/banner.jpg","img/ball-spinner.gif","img/loading-spinner.gif","utils/getSections.js","redux/auth/reducer.js","redux/auth/actionTypes.js","redux/userBooks/reducer.js","redux/userBooks/actionTypes.js","redux/rootReducer.js","redux/store.js","components/Layout/Header.js","redux/auth/actions.js","components/Layout/Navbar.js","components/Layout/Footer.js","utils/getBooks.js","components/SubComponents/BooksContainer.js","components/Public/Search.js","components/Public/Home.js","components/Public/AboutUs.js","components/Public/Policy.js","components/Login.js","utils/s3Upload.js","utils/getBooksOfUser.js","utils/getBookByISBN.js","components/UserBooks.js","components/AddBook/GetBookByISBNForm.js","utils/conditions.js","components/AddBook/AddBookForm.js","utils/incrementBookViewCounter.js","components/AddBook/index.js","utils/updateUser.js","utils/getMe.js","components/Book.js","utils/placeOrder.js","utils/fetchPurchaseOrders.js","components/Order.js","utils/fetchPaymentOrders.js","components/PurchaseOrders.js","components/PaymentOrders.js","App.js","index.js"],"names":["module","exports","getSections","a","axios","get","response","status","data","console","error","initialState","loading","isAdmin","token","userId","isLoggedIn","authReducer","state","action","type","payload","user","id","initialStete","books","view","userBooksReducer","rootReducer","combineReducers","auth","userBooks","store","createStore","composeWithDevTools","applyMiddleware","thunk","Header","className","to","src","logo","alt","loginSuccess","connect","Boolean","dispatch","logout","props","sections","guestButtons","userButtons","onClick","adminButtons","Object","keys","map","section","index","key","Footer","getBooks","query","encodeURI","headers","BooksContainer","useState","setLoading","setBooks","title","useEffect","then","res","err","message","forEach","book","copy","filter","isSold","length","loadingSpinner","_id","coverImage","author","Search","setQuery","onSubmit","event","currentTarget","search","value","placeholder","name","Home","banner","About","Policy","login","post","JSON","stringify","decode","clear","useForm","register","handleSubmit","errors","focusInput","useRef","current","focus","swal","text","icon","buttons","ref","e","required","pattern","email","autoComplete","password","s3Upload","file","filename","Date","now","log","signedUrl","put","fetchBooks","getBookByISBN","getBooksOfUser","price","condition","date","toLocaleDateString","viewCounter","bookId","copyId","dangerMode","willDelete","book_id","copy_id","catch","isbn","GetBookByISBNForm","submit","bookInfo","setBook","validate","conditions","likeNew","excellent","good","acceptable","bad","pageLoading","setPageLoading","success","setSuccess","setSections","imageArr","image","image_1","image_2","image_3","msg","defaultValue","maxLength","selected","description","publisher","publicationYear","getFullYear","min","max","language","label","size","incrementBookViewCounter","updateUser","getMe","match","params","getBook","seller","images","href","target","rel","placeOrder","fetchPurchaseOrders","isPosting","setIsPosting","setError","copyIndex","setCopyIndex","buyer","setBuyer","fetchBook","findIndex","elem","watch","phone","address","street","district","city","country","postal","seller_id","amount","disabled","paymentMethod","paymentAccount","fetchPaymentOrders","orders","setOrders","App","exact","path","component","AboutUs","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.09c58277.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAASAAAAEgARslrPgAACyFJREFUWMONl8uPXVV2xn9rP86599bLVeU3LszDlBvMow0INeGlTqfVCrHUrXRQkwETFLVQ5kgJzBnzJ2TAKJMoZBDRQEtpumkCCeAnYIOt8qPscpXr4bqvc87ea2VQdqVN2VH26GifvY6+8+211vctMTMDMDPMDBFBRABYXFzk7bff5vjx47fs3zz//11/GgcQQmB6epodO3bw1FNPceTIEZxzG+++H3QT1Llz53jrrbf46KOPeOaZZ9i7dy9lWRJjpNvt0jQNZVnSNA05ZwC63S6qSl3X5JwxM3q9Hv1+n5QSOWdyzgyHQ44ePUq322VhYYEXX3xxK6CboESEEydO8MYbb/DNN9/w/PPP8+yzzzI6OgpA0zQAFEWBcw7vPTHGTSA3mSvLchNwv99HVSmKgna7zcLCAu+++y4XLlzAe38re9+n99SpU7z++uscO3aMl19+mZdeegkRwcw2AYgIw+GQGCMhbHzi5n5d1/T7fQCcc7RaLdrtNgDtdpuTJ0/y/vvvc/jwYcqy3Iy/LaDTp0/z5ptvcuLUKf7u17/mb375SxBhMBjQ7/VQM4L3mCp10xCLSPABJ0KIETDqqkbNcN7jvKfdatHudAghMD8/z9LSEs899xzOOaampvDe35KPm4BOnjzJG//4D3zz6X9xb7vN2uef809HjzLSJFZyphwMaKlytSzpxcA0MCHC9RhpioJWjGhW+k3NRFHg2m1aRUk5Pc3E9BStouCj//yUbVOTHDp0CIDx8XFSSrck/SagDz/8kKt//CMHxLOz22X4u9+z7ozGBSqBV3p9GuBaUTCbM5NmbFfleAwMELabcsF5vvOeZ5rEwAnfOpjzngPJeFAzdwOf795Fe2SEgw88wMTEBPPz87dnKDWJCYQXmgaPcV0ch5Ny3SfmnfDvnYIHGvhRVkyghfAfrZI/azIXvXCXGR3L1OLpx8Ccd+zJynhW9mtmvxqKcLqusRs5F0LYrNAtgKq6oqPweJMQFBFhUQIhK/uScTp4CoGrIuwyowMsu8CKh4CyhmObGn9RNVx1jpGs7LbMnPcUCBe9cNIHBqGg02ptVuzNNrOVoariYKr5LHgeytAy5Vh0TGvmQM5cUceKcyxHx3iC886xx5STwTOiDnHGNlMOpMxAYJ9mKicYjiTGshO2q+JFaFJCVWmaBlW9hSF380E1U2AkgatOaETYrYl1cZxzjkOp4cdNgzPjw7LkbAgcSIlomVXnMIFV5/hNUbIsjkqExoT9DnaMjbHfB6YNGqCuayYmJm5pqlsYKrPxUN0wDEIW+CxG9mal8kInw3UcHVOSCIdTYiol7tJMZZ6rAe5WJavyKMLxGJn3gaLd5olYcMZ7RoZD9ubEl7lBnKPdbtPr9bYw9L/S4YQ1cQwdPJoylcA1J0yq8lmI7FBjwTuiGT+rKo65wFUXuEuVx4dDJszoiWPcjC9ioF+2ODQ2ynJKuNU1pgcDhkAVInfPzBBjZHl5eVMytlxZNLjmPMvO01HlB02mxJNF6AsczjV7VNmncMx7zgdPT4R9llkTx3nnOe88veB5enyCODHBaLfH4vIKsRpyPEQaJzSaNius2+1uEelNhhTjTPA8oplG4KsYOOkdJUJE+W0s2a2Zyy5wuijpi3BvypzzjkXnmXeey62Cvw2RmSIw2usytrLGmhgdg6es5oL3lOKIMdJut+l0OncG1IjwcMrMoByPBYvi+OtqyAdFgUN5IikjaqwXxpoZf1VXYMIF5wkm7DfjrrFx1kPAD/ocWFlltqmZ8o5LoeCeuuGKeJwPjI6MEGPkdmsTkGFc946+CVcEZjRhCLM5s83govcEB+Oq3JMSjzUNfRG2idAqShgbw5mysLRMfzikpcJ3sWAACMoHRZu2ZSrvKYqCpmmoqorWjZ60JYdaBldEOBoj+9W45gJr4jhcJxo1rokRzHiySYya8Z0PdJ0QypLR6UkmYmT74go719eZbBrAcKo82DT4rIxrpsSYRnHBU9c1Mcat5m3zweA+VZxABEpTHsiJFSd4MWZzZm82WmZcE09TBOpt4xyKBV1gsHSNSymxXkY6qtQ4ptJG/IJEJixTmIIPYBtmbmRkhLqubw8oC/QRxsWx6owu8J33rGN8GwJOHH3JPJwaHsiJb1sFC2OjHK0SndVVRlNm0QldcewSZcl7Vl1BqRAxlnDMJqP2nqzK4uIirVbrzoAKMy4LiBnr4mibsUsz173nF1Xi/SIQzbjoPKNmPDIY8vCled5TY83g503DavD8qGpYccJDaUBfHKts9KZPikgERkIgeM/6+vqWpnhLDgE8mRJjmnFmPJkazvrANs0sijGjmbYapRnRlM+dh96Ah+uGH6bEVE6IGVe855LzqAmzKTFtG2r/YlWzAHTLFkWMpBt6dsccGjElqtESxyTCt96zzZTdqlxxjgOp4arzfFiU/DArjcC69+zJyrz3fBojB1T5tGjRQ5kMjtM4+gIDDXQNHsmZa4MBJkKn09nSpTcZMmBE4dKNA201dqjxVFUxk5SEozThsaZhRjN/iJ41B1/6wE5NXBbhTIiciIGvg+NQzsyJMOc9PfGcdp6vY2C7wfSw4v8aoAKAAMvOc59mFtUjwH05c8V7FsuSqohcHFS4Bn5a1bQRaozrspHEM6ZcE89FH3m6rplSwwGPVEMUOOsDV73j2xBYTQ2mSrvdxjm35co2OUtifFwERgQO5oavgufrIrIkMFtXKMbJGGlhHK4rtufMZQeL3nMgJ34xHPBQUzOTMy2D+7OyJsaaOPaZUhh8EgNf54ypMjk5SVmWW6RjE9CkGpPZwISz3m0Yr5x5YjhgV3/I3pS46B1fhMChuub+lNluwokYOec9152nreBFmHdwNAQcjl05c0YcfSf85XBIuGHKiqLY9EJ/CmoT0F5VahFGyAQzDiZld1Yac1zxgVMhMqbKVz7wZdli2XkOpYQCvysL/jsEdpuyJrDqBDFhzAyccCYE9mT4SVWxM2/E3HSM3x/RNwH1EbbZhhHfocYu26D7rHfMeU8L+OmN/PjnVpuhg6ebigdTQ1uVbZZZFmEAPF/X3J8bFpwnSSCLY0+u+Tp4roiQmwZ/Q9NuW/YGjJQlM94zVOOrUHDFC/tTIt0AGMl8ESNR4G7LfBwjCSPgmFE44yN3qbJTFW9wzgm7gPNmTOfEIo7LQTavR1WZm5tj+/btW02+AK2RNhfHRlnq9qnEeLKquV8TnxQtFOU6Qssys1kpMlwVzwkf+HldQ4LREFjxQleEj4uCIMZ4Vs6K4+6cCQL3qjKdM01KzM3N0e12ee21126Z7zevbKHf53x3nYveM6qwQzdE9Jo49mlGMJac44wTvvHCbs3cr/D7GOk6YcaMw1XN3rwhHTtUWAHGTdljG+Zv1TmKrMzPz/Pee+/x6quv8sILL9y+yrpNzX11w4+binUvvFeWfBojDca7ZckfioJpE16sKqYVvvKBCmNK4YNYMCfCfSnRMXikSTiMMTN+kBLBYLvZhplT5Z133mF2dpYjR47cWcv2ZCiBRee4R40nUsOKc6x4z6wazzaZMTPWnWcuBDoC573nsabhZ3XDshP+rdPmt602ExjrIiz4wPEYueYFMdimIDnRarV45ZVXbusaN7Xs45z412bjD5OAN8Nr5orz/EYz+7JiwCXvoarYnZSLzvGlZqJlmtRwPXouxoJ/AaYGA3oirImxU41GBG+wlBx//6tfcfDgwTtLB8DjP/lzBiOd244lBuiN5H/oxr4Bj97Y3zwrQmoaVlZXmZ+fx/V6lHVFt9fDdKO6xkLg4Owsd1r/A7gp2EU2gq8pAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA5LTIyVDIwOjQ1OjQ3KzAwOjAwdzAClAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wOS0yMlQyMDo0NTo0NyswMDowMAZtuigAAABGdEVYdHNvZnR3YXJlAEltYWdlTWFnaWNrIDYuNy44LTkgMjAxNC0wNS0xMiBRMTYgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmfchu0AAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OmhlaWdodAAxOTIPAHKFAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADE5MtOsIQgAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYwMDgwNzU0N49IV/sAAAAPdEVYdFRodW1iOjpTaXplADBCQpSiPuwAAABWdEVYdFRodW1iOjpVUkkAZmlsZTovLy9tbnRsb2cvZmF2aWNvbnMvMjAyMC0wOS0yMi84OGE4ZmY1ZDRlZGVlZmQ2YTIyMDgyODg3NDk2ZTU1ZC5pY28ucG5nRmNa1QAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/banner.6981ec31.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ball-spinner.41328357.gif\";","module.exports = __webpack_public_path__ + \"static/media/loading-spinner.09559b13.gif\";","import axios from 'axios';\r\nconst getSections = async () => {\r\n  try {\r\n    const response = await axios.get(`/api/static/sections`);\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n    return {};\r\n  }\r\n};\r\n\r\nexport default getSections;\r\n","import {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  LOGOUT,\r\n} from './actionTypes';\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  isAdmin: false,\r\n  token: '',\r\n  userId: '',\r\n  isLoggedIn: false,\r\n  error: '',\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOGIN_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        token: action.payload.token,\r\n        isLoggedIn: true,\r\n        userId: action.payload.user.id,\r\n        isAdmin: action.payload.user.isAdmin,\r\n        error: '',\r\n      };\r\n    case LOGIN_FAILURE:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload.error,\r\n      };\r\n    case LOGOUT:\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default authReducer;\r\n","export const LOGIN_REQUEST = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\r\nexport const LOGOUT = 'LOGOUT';\r\n","import {\r\n  FETCH_BOOKS_REQUEST,\r\n  FETCH_BOOKS_SUCCESS,\r\n  FETCH_BOOKS_FAILURE,\r\n} from './actionTypes';\r\n\r\nconst initialStete = {\r\n  loading: false,\r\n  books: [],\r\n  view: [],\r\n  error: '',\r\n};\r\n\r\nconst userBooksReducer = (state = initialStete, action) => {\r\n  switch (action.type) {\r\n    case FETCH_BOOKS_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case FETCH_BOOKS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        books: action.payload.books,\r\n      };\r\n    case FETCH_BOOKS_FAILURE:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload.error,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userBooksReducer;\r\n","export const FETCH_BOOKS_REQUEST = 'FETCH_BOOKS_REQUEST';\r\nexport const FETCH_BOOKS_SUCCESS = 'FETCH_BOOKS_SUCCESS';\r\nexport const FETCH_BOOKS_FAILURE = 'FETCH_BOOKS_FAILURE';\r\n","import { combineReducers } from 'redux';\r\nimport authReducer from './auth/reducer';\r\nimport userBooksReducer from './userBooks/reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  userBooks: userBooksReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;\r\n","// modules\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// static\r\nimport '../../stylesheet/Header.css';\r\nimport logo from '../../img/logo36x36.png';\r\n\r\nconst Header = () => {\r\n  return (\r\n    <Link className='header' to='/'>\r\n      <img className='header-item header-img' src={logo} alt='أيقونة الموقع' />\r\n      <span className='header-item header-text'>{'مــتـجر كـــاف'}</span>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import decode from 'jwt-decode';\r\nimport axios from 'axios';\r\nimport {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  LOGOUT,\r\n} from './actionTypes';\r\n\r\nexport const loginRequest = () => {\r\n  return {\r\n    type: LOGIN_REQUEST,\r\n  };\r\n};\r\n\r\nexport const loginSuccess = (token, user) => {\r\n  return {\r\n    type: LOGIN_SUCCESS,\r\n    payload: {\r\n      token,\r\n      user,\r\n    },\r\n  };\r\n};\r\n\r\nexport const loginFailure = (error) => {\r\n  return {\r\n    type: LOGIN_FAILURE,\r\n    payload: {\r\n      error,\r\n    },\r\n  };\r\n};\r\n\r\nexport const logout = () => {\r\n  return {\r\n    type: LOGOUT,\r\n  };\r\n};\r\n\r\nexport const login = (data) => {\r\n  return async (dispatch) => {\r\n    dispatch(loginRequest());\r\n    try {\r\n      const response = await axios.post(\r\n        '/api/user/login',\r\n        JSON.stringify(data),\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n      if (response.status === 200) {\r\n        const token = response.data;\r\n        const { user } = await decode(token);\r\n        dispatch(loginSuccess(token, user));\r\n      }\r\n    } catch (error) {\r\n      dispatch(loginFailure(error.response.data));\r\n    }\r\n  };\r\n};\r\n","// modules\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\n// helpers\r\nimport { logout } from '../../redux/auth/actions';\r\n\r\n// static\r\nimport '../../stylesheet/Navbar.css';\r\n\r\nconst Navbar = (props) => {\r\n  const { sections, isLoggedIn, isAdmin, logout } = props;\r\n\r\n  // buttons that will be shown to guest\r\n  const guestButtons = (\r\n    <ul className='navbar-list'>\r\n      <li className='navbar-list-item'>\r\n        <Link className='navbar-list-item-link' to='/login'>\r\n          {'تسجيل الدخول'}\r\n        </Link>\r\n      </li>\r\n      <li className='navbar-list-item'>\r\n        <Link className='navbar-list-item-link' to='/register'>\r\n          {'مستخدم جديد؟'}\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n\r\n  // buttons that will be shown to logged in user\r\n  const userButtons = (\r\n    <ul className='navbar-list'>\r\n      <li className='navbar-list-item dropdown'>\r\n        <span className='navbar-list-item-link'>{'خدماتي'}</span>\r\n        <ul className='dropdown-content'>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/user/me'>\r\n              {'معلوماتي'}\r\n            </Link>\r\n          </li>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/user/orders'>\r\n              {'مشترياتي'}\r\n            </Link>\r\n          </li>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/user/sales'>\r\n              {'مبيعاتي'}\r\n            </Link>\r\n          </li>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/user/books'>\r\n              {'إدارة كتبي'}\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n      <li className='navbar-list-item'>\r\n        <Link className='navbar-list-item-link' onClick={logout} to='/'>\r\n          {'خروج'}\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n\r\n  // buttons that will be shown to admin\r\n  const adminButtons = (\r\n    <ul className='navbar-list'>\r\n      <li className='navbar-list-item dropdown'>\r\n        <span className='navbar-list-item-link'>{'إدارة'}</span>\r\n        <ul className='dropdown-content'>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/admin/users'>\r\n              {'إدارة المستخدمين'}\r\n            </Link>\r\n          </li>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/admin/books'>\r\n              {'إدارة الكتب'}\r\n            </Link>\r\n          </li>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/admin/reports'>\r\n              {'التقارير'}\r\n            </Link>\r\n          </li>\r\n          <li className='navbar-list-item'>\r\n            <Link className='navbar-list-item-link' to='/admin/complaints'>\r\n              {'الشكاوي'}\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n      <li className='navbar-list-item'>\r\n        <Link className='navbar-list-item-link' onClick={logout} to='/'>\r\n          {'خروج'}\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n\r\n  return (\r\n    <nav className='navbar'>\r\n      <ul className='navbar-list'>\r\n        <li className='navbar-list-item dropdown'>\r\n          <span className='navbar-list-item-link navbar-list-item-link-first'>\r\n            {'أقسام الكتب'}\r\n          </span>\r\n          <ul className='dropdown-content'>\r\n            {Object.keys(sections).map((section, index) => (\r\n              <li className='navbar-list-item' key={index}>\r\n                <Link\r\n                  className='navbar-list-item-link navbar-list-item-link-first'\r\n                  to={`/section/${section}`}\r\n                >\r\n                  {section}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </li>\r\n        <li className='navbar-list-item'>\r\n          <Link className='navbar-list-item-link' to='/search/_all'>\r\n            {'جميع الكتب'}\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n      {isLoggedIn ? (isAdmin ? adminButtons : userButtons) : guestButtons}\r\n    </nav>\r\n  );\r\n};\r\n\r\nNavbar.propTypes = {\r\n  isAdmin: PropTypes.bool.isRequired,\r\n  isLoggedIn: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAdmin: Boolean(state.auth.isAdmin),\r\n    isLoggedIn: Boolean(state.auth.isLoggedIn),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    logout: () => dispatch(logout()),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\r\n","// modules\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// static\r\nimport '../../stylesheet/Footer.css';\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className='footer'>\r\n      <div className='footer-element'>\r\n        <Link className='footer-link' to='/aboutus'>\r\n          {'من نحن'}\r\n        </Link>\r\n        {' | '}\r\n        <Link className='footer-link' to='/policy'>\r\n          {'سياسة الموقع'}\r\n        </Link>\r\n      </div>\r\n      <div className='footer-element'></div>\r\n      <span>{`جميع الحقوق محفوظة`} &copy; 2020</span>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import axios from 'axios';\r\nconst getBooks = async (query) => {\r\n  try {\r\n    const response = await axios.get(`/api/book?query=${encodeURI(query)}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default getBooks;\r\n","// modules\r\nimport React, { Fragment, useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// helpers\r\nimport getBooks from '../../utils/getBooks';\r\n\r\n// static\r\nimport '../../stylesheet/BooksContainer.css';\r\nimport loadingSpinner from '../../img/loading-spinner.gif';\r\n\r\nconst BooksContainer = (props) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [books, setBooks] = useState();\r\n  const { query, title } = props;\r\n\r\n  useEffect(() => {\r\n    // load books\r\n    getBooks(query).then((res, err) => {\r\n      if (err) {\r\n        console.error(err.message);\r\n        setLoading(false);\r\n      }\r\n      if (res) {\r\n        // remove sold copies of a book\r\n        res.forEach(\r\n          (book) => (book.copy = book.copy.filter((copy) => !copy.isSold))\r\n        );\r\n      }\r\n      // if response -> remove books with 0 available copies\r\n      setBooks(res && res.filter((book) => book.copy.length > 0));\r\n      setLoading(false);\r\n    });\r\n  }, [query]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <h3 className='books-container-title'>{title}</h3>\r\n      <div className='books-container'>\r\n        {loading ? (\r\n          <img\r\n            src={loadingSpinner}\r\n            alt='loading'\r\n            className='books-container-load'\r\n          />\r\n        ) : books && books.length > 0 ? (\r\n          books.map((book) => (\r\n            <div className='book' key={book._id}>\r\n              <Link className='book-link' to={`/book/${book._id}`}>\r\n                <img\r\n                  className='book-cover'\r\n                  src={book.coverImage}\r\n                  alt='غلاف الكتاب'\r\n                />\r\n                <span className='book-info book-title'>{book.title}</span>\r\n                <span className='book-info book-author'>{book.author}</span>\r\n              </Link>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className='no-books'>{'لا يوجد كتب لعرضها'}</div>\r\n        )}\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default BooksContainer;\r\n","// modules\r\nimport React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n// static\r\nimport '../../stylesheet/Search.css';\r\n\r\nconst Search = () => {\r\n  const [query, setQuery] = useState(false);\r\n\r\n  // when query submitted\r\n  if (query) {\r\n    return <Redirect to={`/search/${query}`} />;\r\n  }\r\n\r\n  return (\r\n    <form\r\n      onSubmit={(event) => setQuery(event.currentTarget.search.value)}\r\n      className='search-form'\r\n    >\r\n      <input\r\n        className='search-input'\r\n        type='text'\r\n        placeholder='ابحث عن كتاب'\r\n        name='search'\r\n      ></input>\r\n      <input type='submit' className='search-submit' value='' />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","// modules\r\nimport React, { Fragment } from 'react';\r\nimport BooksContainer from '../SubComponents/BooksContainer';\r\nimport Search from './Search';\r\n\r\n// static\r\nimport banner from '../../img/banner.jpg';\r\nimport '../../stylesheet/Home.css';\r\n\r\nconst Home = () => {\r\n  return (\r\n    <Fragment>\r\n      <div className='banner-container'>\r\n        <img\r\n          src={banner}\r\n          alt='قم ببيع وشراء الكتب المستعملة واستمتع بالتوفير'\r\n          className='banner-image'\r\n        />\r\n      </div>\r\n      <Search />\r\n      <BooksContainer title='أحدث الكتب المضافة' query='_latest' />\r\n      <hr />\r\n      <BooksContainer title='مقترحاتنا لك' query='_recom' />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","// modules\r\nimport React from 'react';\r\n\r\n// static\r\nimport '../../stylesheet/StaticPage.css';\r\n\r\nconst About = () => {\r\n  return (\r\n    <div className='static-page'>\r\n      <h2 className='page-title'>{'تعرف علينا'}</h2>\r\n\r\n      <h3 className='paragraph-head'>{'من نحن:'}</h3>\r\n      <p className='paragraph'>\r\n        {`مؤسسي متجر إلكتروني يُعنى ببيع وشراء الكتب المستعملة، ونتطلع إلى مستقبل مليء بالعديد من الفرص الجديدة والابتكارات الجديدة وبالطبع الكتب الجديدة!`}\r\n      </p>\r\n\r\n      <h3 className='paragraph-head'>{'هدفنا:'}</h3>\r\n      <p className='paragraph'>\r\n        {`تقديم منصة إلكترونية تمكّنك من اقتناء الكتب المستعملة وبيعها في جميع أنحاء العالم، وأن نكون مكانًا يعزز ثقافة القراءة ويربط الناس بالكتب التي يحبونها.`}\r\n      </p>\r\n\r\n      <h3 className='paragraph-head'>{'رؤيتنا:'}</h3>\r\n      <p className='paragraph'>\r\n        {'استدامة التبادل المعرفي والموارد الطبيعية وتوفير الكسب المادي.'}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default About;\r\n","// modules\r\nimport React from 'react';\r\n\r\n// static\r\nimport '../../stylesheet/StaticPage.css';\r\n\r\nconst Policy = () => {\r\n  return (\r\n    <div className='static-page'>\r\n      <h2 className='page-title'>{'الخصوصية وسياسة الاستخدام'}</h2>\r\n\r\n      <h3 className='paragraph-head'>{'سياسة الموقع:'}</h3>\r\n      <p className='paragraph'>\r\n        {`تنطبق هذه السياسات على استخدامك لمتجر كاف الإلكتروني. باستخدام موقع\r\n    المتجر فأنت توافق على الالتزام بهذه الشروط والأحكام. وفي حال عدم موافقتك\r\n    على الشروط والأحكام يتعين عليك عدم استخدام الموقع. كجزء من التزامنا متجر\r\n    كاف مكانا ترغب في زيارته باستمرار فإننا نرحب بكافة تعليقاتك على أي من\r\n    .السياسات أو القواعد التي ندرجها أدناه`}\r\n      </p>\r\n\r\n      <h3 className='paragraph-head'>{'العضوية و كلمة المرور:'}</h3>\r\n      <p className='paragraph'>\r\n        {`اذا قررت استخدام هذا الموقع، ستكون مسؤولا عن صيانة سرية حساباتك وكلمة السر وعن منع أي دخول متطفل الى حاسوبك. وستوافق على أن تكون مسؤولا عن كل النشاطات التي ستتم باستخدام كلمة السر الخاصة بك، وعليه فإنك توافق على أن تُعلم إدارة الموقع مباشرة عن أي استخدام غير مشروع لحسابك أو عن أي خرق لسرّيته.`}\r\n      </p>\r\n\r\n      <h3 className='paragraph-head'>{'سياسة الخصوصية:'}</h3>\r\n      <p className='paragraph'>\r\n        {`إن بيانات التسجيل وبعض المعلومات الأخرى التي تتعلق بك تندرج تحت سياسة الخصوصية التي يتبعها متجر كاف، ولن يتم مشاركة المعلومات الشخصية التي تقوم بتقديمها على هذا الموقع خارجه إلا بعد الحصول على إذن منك.`}\r\n      </p>\r\n\r\n      <h3 className='paragraph-head'>{'سلوك العضوية:'}</h3>\r\n      <p className='paragraph'>\r\n        {`إنك تمثل وتضمن وتتعهد بما يلي:`}\r\n        <ul className='paragraph-list'>\r\n          <li className='paragraph-list-item'>\r\n            {\r\n              'لن تعمل على سحب أو بعث أو إيصال أو توزيع أو نشر أي مادة من المواد المتوفرة على متجر كاف، والتي من شأنها أن تحد أو تمنع أي مستعمل آخر من استعمال الموقع والاستفادة من محتوياته.'\r\n            }\r\n          </li>\r\n          <li className='paragraph-list-item'>\r\n            {\r\n              'أن تخرق القانون أو تحمل تهديدا أو عدوانا أو سبا أو قدحا أو تصرفا فاحشا غير أخلاقي أو تهجما أو خروجا عن الآداب والأخلاق.'\r\n            }\r\n          </li>\r\n          <li className='paragraph-list-item'>\r\n            {\r\n              'أن تدفع إلى القيام بسلوك يعتبر تعديا إجراميا أو تشجع عليه، مما من شأنه أن يؤدي إلى المسؤولية المدنية أو أي شكل من أشكال خرق القانون.'\r\n            }\r\n          </li>\r\n          <li className='paragraph-list-item'>\r\n            {\r\n              'أن تتعدى على حقوق أطراف أخرى ثالثة أو تسرق أو تتجاوز هذه الحقوق المتعلقة بكل حقوق الملكية الفكرية بدون حدود، والحقوق التجارية المسجلة وحقوق براءات الاختراع والحقوق الخاصة والعامة أو أي حق من حقوق الملكية.'\r\n            }\r\n          </li>\r\n          <li className='paragraph-list-item'>\r\n            {\r\n              'أن تشتمل تلك المواد على فيروس معلوماتي أو أي شيء آخر ضار بالموقع.'\r\n            }\r\n          </li>\r\n          <li className='paragraph-list-item'>\r\n            {'أن تشتمل على أي إعلان أو دعاية كيفما كانت.'}\r\n          </li>\r\n          <li className='paragraph-list-item'>\r\n            {\r\n              'يجب الإطلاع والموافقة على شروط التسجيل بموقع متجر كاف، وتسجيلك يعني موافقتك والتزامك بشروط التسجيل والمشاركة وعند خرق أي من هذه الشروط يحق للإدارة إيقاف أو إلغاء عضويتك فورًا.'\r\n            }\r\n          </li>\r\n        </ul>\r\n      </p>\r\n\r\n      <h3 className='paragraph-head'>{'محتوى الموقع:'}</h3>\r\n      <p className='paragraph'>\r\n        {\r\n          'يقدم متجر كاف و يوفر مجموعة متنوعة من المعلومات وعدد من الأدوات في الموقع لمساعدتك. جميع التعليقات وردود فعل المستخدمين في صفحات الكتب هي جزء من محتويات الموقع. على مستخدمي الموقع أن يدركوا أن إدارة الموقع لاتساهم في المضمون الوارد في التعليقات والآراء التي تُنشر في صفحات الموقع من قبل مستخدمي الموقع.'\r\n        }\r\n      </p>\r\n\r\n      <h3 className='paragraph-head'>{'الإلغاء:'}</h3>\r\n      <p className='paragraph'>\r\n        {\r\n          'موقع متجر كاف لديه الحق بمنع أو إلغاء دخول المستخدم إلى الموقع أو وقف التعامل مع أي شخص في حالة ثبوت استخدامه الألفاظ النابية، الفحش، التهديد، المضايقة، التشهير، والتعليقات المسيئة بأي طريقة كانت أو التعرض بأي شكل من الأشكال تجاه أي ممستخدم للموقع.!'\r\n        }\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Policy;\r\n","import React, { useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useForm } from 'react-hook-form';\r\nimport { connect } from 'react-redux';\r\nimport loadingSpinner from '../img/loading-spinner.gif';\r\nimport { login, logout } from '../redux/auth/actions';\r\nimport swal from '@sweetalert/with-react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst Login = (props) => {\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const focusInput = useRef(null);\r\n  useEffect(() => {\r\n    if (focusInput.current) focusInput.current.focus();\r\n  }, []);\r\n  useEffect(() => {\r\n    if (props.error) {\r\n      swal({\r\n        title: 'حدث خطأ ما!',\r\n        text: props.error,\r\n        icon: 'error',\r\n        buttons: 'إعادة المحاولة',\r\n      }).then(() => {\r\n        props.clear();\r\n      });\r\n    }\r\n  });\r\n\r\n  if (props.isLoggedIn) {\r\n    return <Redirect to='/' />;\r\n  }\r\n\r\n  return (\r\n    <form className='form' onSubmit={handleSubmit((data) => props.login(data))}>\r\n      <h2 className='form-title'>تسجيل الدخول</h2>\r\n      <input\r\n        name='email'\r\n        type='email'\r\n        className='form-control ltr'\r\n        placeholder='البريد الإلكتروني'\r\n        ref={(e) => {\r\n          register(e, {\r\n            required: 'يرجى إدخال البريد الالكتروني',\r\n            pattern: {\r\n              value: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n              message: 'يجب إدخال بريد إلكتروني صالح',\r\n            },\r\n          });\r\n          focusInput.current = e;\r\n        }}\r\n      />\r\n      {errors.email && (\r\n        <span className='form-error-message'>{errors.email.message}</span>\r\n      )}\r\n\r\n      <input\r\n        name='password'\r\n        type='password'\r\n        className='form-control ltr'\r\n        placeholder='كلمة السر'\r\n        autoComplete='on'\r\n        ref={register({\r\n          required: 'يرجى إدخال كلمة السر',\r\n        })}\r\n      />\r\n      {errors.password && (\r\n        <span className='form-error-message'>{errors.password.message}</span>\r\n      )}\r\n      {props.loading ? (\r\n        <img\r\n          className='form-control form-loading-spinner'\r\n          src={loadingSpinner}\r\n          alt='loading'\r\n        />\r\n      ) : (\r\n        <input\r\n          className='form-control form-control-submit'\r\n          type='submit'\r\n          value='دخول'\r\n        />\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  isLoggedIn: PropTypes.bool.isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n  login: PropTypes.func.isRequired,\r\n  clear: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isLoggedIn: state.auth.isLoggedIn,\r\n    loading: state.auth.loading,\r\n    error: state.auth.error,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    login: (data) => dispatch(login(data)),\r\n    clear: () => dispatch(logout()),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import axios from 'axios';\r\nconst AWS_BUCKET = 'kafstore';\r\n\r\nconst s3Upload = async (file, type) => {\r\n  const filename = `${type}-${Date.now()}-${file.name}`;\r\n  console.log(filename, file.type);\r\n  try {\r\n    const signedUrl = await axios.get(\r\n      '/api/utils/sign_url?filename=' +\r\n        encodeURI(filename) +\r\n        '&filetype=' +\r\n        encodeURI(file.type)\r\n    );\r\n\r\n    await axios.put(signedUrl.data, file, {\r\n      headers: {\r\n        'Content-Type': file.type,\r\n      },\r\n    });\r\n\r\n    return `https://${AWS_BUCKET}.s3-eu-west-1.amazonaws.com/${filename}`;\r\n  } catch (error) {\r\n    console.error(error.message);\r\n    return '';\r\n  }\r\n};\r\n\r\nexport default s3Upload;\r\n","import axios from 'axios';\r\nconst fetchBooks = async (userId) => {\r\n  try {\r\n    const response = await axios.get(`/api/book/user/${userId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default fetchBooks;\r\n","import axios from 'axios';\r\nconst getBookByISBN = async (isbn) => {\r\n  try {\r\n    const response = await axios.get(`/api/book?query=${isbn}`);\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n    return { isbn };\r\n  }\r\n};\r\n\r\nexport default getBookByISBN;\r\n","import React, { useEffect, Fragment, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport loadingSpinner from '../img/loading-spinner.gif';\r\nimport getBooksOfUser from '../utils/getBooksOfUser';\r\nimport swal from 'sweetalert';\r\nimport axios from 'axios';\r\n\r\nconst UserBooks = (props) => {\r\n  const { token, isLoggedIn, userId } = props;\r\n  const [loading, setLoading] = useState(true);\r\n  const [books, setBooks] = useState(null);\r\n  useEffect(() => {\r\n    getBooksOfUser(userId).then((res, err) => {\r\n      if (err) {\r\n        console.error(err.message);\r\n        setLoading(false);\r\n      }\r\n      setBooks(res);\r\n      setLoading(false);\r\n    });\r\n  }, [userId]);\r\n\r\n  const deleteUserBook = (bookId, copyId) => {\r\n    swal({\r\n      title: ' هل أنت متأكد !',\r\n      text: 'سوف يتم حذف الكتاب نهائيا. هل انت متأكد؟',\r\n      icon: 'warning',\r\n      buttons: ['إلغاء', 'موافق'],\r\n      dangerMode: true,\r\n    }).then((willDelete) => {\r\n      if (willDelete) {\r\n        const data = {\r\n          book_id: bookId,\r\n          copy_id: copyId,\r\n        };\r\n        axios\r\n          .put('/api/book', JSON.stringify(data), {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-auth-token': token,\r\n            },\r\n          })\r\n          .then(() => {\r\n            setBooks(books.filter((book) => book.copy._id === copyId));\r\n            swal('تم حذف الكتاب بنجاح', {\r\n              icon: 'success',\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            console.error(err.message);\r\n            swal('حصل خطأ أثناء تنفيذ العملية', {\r\n              icon: 'error',\r\n            });\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  if (!isLoggedIn) {\r\n    return <Redirect to='/login' />;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Link className='button' to='/user/books/addbook'>\r\n        {'إضافة كتاب'}\r\n      </Link>\r\n\r\n      {loading ? (\r\n        <img src={loadingSpinner} alt='loading' className='page-load' />\r\n      ) : books && books.length > 0 ? (\r\n        <div className='user-books'>\r\n          {books.map((book) => {\r\n            return (\r\n              <div className='user-book' key={book._id}>\r\n                <img\r\n                  src={book.coverImage}\r\n                  className='user-book-cover'\r\n                  alt='book cover'\r\n                />\r\n                <div className='user-book-info'>\r\n                  {`اسم الكتاب : ${book.title}`} <br />\r\n                  {`اسم المؤلف : ${book.author}`} <br />\r\n                  {`السعر : ${book.copy[0].price} ل.س.`} <br />\r\n                  {`الحالة : ${book.copy[0].condition}`} <br />\r\n                  {`تاريخ الإضافة : ${new Date(\r\n                    book.copy[0].date\r\n                  ).toLocaleDateString()}`}{' '}\r\n                  <br />\r\n                  {`عدد المشاهدات : ${book.viewCounter}`}\r\n                  <br />\r\n                </div>\r\n                <div className='user-book-controls'>\r\n                  <button className='user-book-button'>تعديل</button> <br />\r\n                  <button\r\n                    className='user-book-button'\r\n                    onClick={() => deleteUserBook(book._id, book.copy[0]._id)}\r\n                  >\r\n                    حذف\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div className='no-books'>{'لا يوجد كتب لعرضها'}</div>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nUserBooks.propTypes = {\r\n  isLoggedIn: PropTypes.bool.isRequired,\r\n  token: PropTypes.string.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isLoggedIn: state.auth.isLoggedIn,\r\n    token: state.auth.token,\r\n    userId: state.auth.userId,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, null)(UserBooks);\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport getBookByISBN from '../../utils/getBookByISBN';\r\nimport loadingSpinner from '../../img/loading-spinner.gif';\r\n\r\nconst GetBookByISBNForm = (props) => {\r\n  const focusInput = useRef(null);\r\n  useEffect(() => {\r\n    focusInput.current.focus();\r\n  }, []);\r\n\r\n  const submit = async (data) => {\r\n    setLoading(true);\r\n    const bookInfo = await getBookByISBN(data.isbn);\r\n    setLoading(false);\r\n    props.setBook(bookInfo);\r\n  };\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const { register, handleSubmit, errors } = useForm();\r\n  return (\r\n    <form className='form' onSubmit={handleSubmit(submit)}>\r\n      <input\r\n        name='isbn'\r\n        type='text'\r\n        className='form-control ltr'\r\n        placeholder='أدخل رقم الكتاب ISBN'\r\n        ref={(e) => {\r\n          register(e, {\r\n            required: 'يرجى إدخال رقم ISBN',\r\n            validate: (value) => value.length === 10 || value.length === 13,\r\n          });\r\n          focusInput.current = e;\r\n        }}\r\n      />\r\n      {errors.isbn && (\r\n        <span className='form-error-message'>\r\n          {'رقم ISBN يجب أن يكون مكونا من عشر أو ثلاثة عشر رقما'}\r\n        </span>\r\n      )}\r\n      {loading ? (\r\n        <img\r\n          className='form-control form-loading-spinner'\r\n          src={loadingSpinner}\r\n          alt='loading'\r\n        />\r\n      ) : (\r\n        <input\r\n          className='form-control form-control-submit'\r\n          type='submit'\r\n          value='التالي'\r\n        />\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default GetBookByISBNForm;\r\n","const conditions = {\r\n  likeNew: 'كأنه جديد',\r\n  excellent: 'ممتاز',\r\n  good: 'جيد',\r\n  acceptable: 'مقبول',\r\n  bad: 'سيء',\r\n};\r\n\r\nexport default conditions;\r\n","import React, { Fragment, useRef, useState, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport axios from 'axios';\r\n\r\nimport loadingSpinner from '../../img/loading-spinner.gif';\r\nimport getSections from '../../utils/getSections';\r\nimport conditions from '../../utils/conditions';\r\nimport s3Upload from '../../utils/s3Upload';\r\n\r\nconst AddBookForm = (props) => {\r\n  const focusInput = useRef(null);\r\n  const [pageLoading, setPageLoading] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [sections, setSections] = useState(null);\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const { book } = props;\r\n\r\n  useEffect(() => {\r\n    if (focusInput.current) focusInput.current.focus();\r\n    getSections().then((data, error) => {\r\n      if (error) {\r\n        setPageLoading(false);\r\n      }\r\n      setSections(data);\r\n      setPageLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  const submit = async (data) => {\r\n    setLoading(true);\r\n    const imageArr = ['image_1', 'image_2', 'image_3', 'coverImage'];\r\n    try {\r\n      for (let image of imageArr) {\r\n        if (image === 'coverImage' && book.coverImage) {\r\n          data['coverImage'] = book.coverImage;\r\n          continue;\r\n        }\r\n        if (data[image]) {\r\n          data[image] = await s3Upload(\r\n            data[image][0],\r\n            image === 'coverImage' ? 'coverImage' : 'bookImage'\r\n          );\r\n        }\r\n      }\r\n\r\n      data['images'] = `${data.image_1}, ${data.image_2}, ${data.image_3}`;\r\n      imageArr.forEach((image) => {\r\n        if (image !== 'coverImage') {\r\n          delete data[image];\r\n        }\r\n      });\r\n\r\n      data.isbn = book.isbn;\r\n\r\n      const response = await axios.post('/api/book', data, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-auth-token': props.token,\r\n        },\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        setLoading(false);\r\n        await swal({\r\n          title: 'تم إضافة الكتاب بنجاح',\r\n          text: 'اضغط موافق للانتقال إلى صفحة الكتب',\r\n          icon: 'success',\r\n          buttons: 'موافق',\r\n        });\r\n        setSuccess(true);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setLoading(false);\r\n      swal({\r\n        title: 'حدث خطأ ما',\r\n        text: `${\r\n          error.response ? error.response.data.errors[0].msg : error.message\r\n        }`,\r\n        icon: 'error',\r\n        buttons: 'موافق',\r\n      });\r\n    }\r\n  };\r\n\r\n  if (pageLoading) {\r\n    return <img src={loadingSpinner} alt='loading' className='page-load' />;\r\n  }\r\n\r\n  if (success) {\r\n    return <Redirect to='/user/books' />;\r\n  }\r\n\r\n  return (\r\n    <form className='form' onSubmit={handleSubmit(submit)}>\r\n      <h2 className='form-title'>{'إضافة كتاب'}</h2>\r\n\r\n      <label className='form-group-label'>{'اسم الكتاب'}</label>\r\n      <input\r\n        name='title'\r\n        type='text'\r\n        className='form-control'\r\n        placeholder='اسم الكتاب'\r\n        defaultValue={book.title || ''}\r\n        ref={(e) => {\r\n          register(e, {\r\n            required: 'يرحى إدخال اسم الكتاب',\r\n            maxLength: {\r\n              value: 255,\r\n              message: 'يجب أن لا يتجاوز اسم الكتاب 255 حرفا',\r\n            },\r\n          });\r\n          focusInput.current = e;\r\n        }}\r\n      />\r\n      {errors.title && (\r\n        <span className='form-error-message'>{errors.title.message}</span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'المؤلف'}</label>\r\n      <input\r\n        name='author'\r\n        type='text'\r\n        className='form-control'\r\n        placeholder='اسم المؤلف'\r\n        defaultValue={book.author || ''}\r\n        ref={register({\r\n          required: 'يرحى إدخال اسم المؤلف',\r\n          maxLength: {\r\n            value: 255,\r\n            message: 'يجب أن لا يتجاوز اسم المؤلف 255 حرفا',\r\n          },\r\n        })}\r\n      />\r\n      {errors.author && (\r\n        <span className='form-error-message'>{errors.author.message}</span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'القسم'}</label>\r\n      {sections ? (\r\n        <select\r\n          name='section'\r\n          className='form-control'\r\n          ref={register({\r\n            required: 'يرحى إدخال اسم القسم',\r\n            maxLength: {\r\n              value: 255,\r\n              message: 'يجب أن لا يتجاوز اسم القسم 255 حرفا',\r\n            },\r\n          })}\r\n          defaultValue={book.section || ''}\r\n        >\r\n          {Object.keys(sections).map((section, index) => (\r\n            <option\r\n              key={index}\r\n              value={section}\r\n              selected={book.section && book.section === section}\r\n            >\r\n              {section}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      ) : (\r\n        <input\r\n          name='section'\r\n          type='text'\r\n          className='form-control'\r\n          placeholder='القسم'\r\n          defaultValue={book.section || ''}\r\n          ref={register({\r\n            required: 'يرحى إدخال اسم القسم',\r\n            maxLength: {\r\n              value: 255,\r\n              message: 'يجب أن لا يتجاوز اسم القسم 255 حرفا',\r\n            },\r\n          })}\r\n        />\r\n      )}\r\n      {errors.section && (\r\n        <span className='form-error-message'>{errors.section.message}</span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'وصف الكتاب'}</label>\r\n      <textarea\r\n        name='description'\r\n        type='text'\r\n        className='form-control textarea'\r\n        placeholder='الوصف'\r\n        defaultValue={book.description || ''}\r\n        ref={register({\r\n          required: 'يرحى إدخال الوصف',\r\n          maxLength: {\r\n            value: 500,\r\n            message: 'يجب أن لا يتجاوز الوصف 500 حرفا',\r\n          },\r\n        })}\r\n      />\r\n      {errors.description && (\r\n        <span className='form-error-message'>{errors.description.message}</span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'الناشر'}</label>\r\n      <input\r\n        name='publisher'\r\n        type='text'\r\n        className='form-control'\r\n        placeholder='دار النشر'\r\n        defaultValue={book.publisher || ''}\r\n        ref={register({\r\n          required: 'يرحى إدخال اسم دار النشر',\r\n          maxLength: {\r\n            value: 255,\r\n            message: 'يجب أن لا يتجاوز اسم دار النشر 255 حرفا',\r\n          },\r\n        })}\r\n      />\r\n      {errors.publisher && (\r\n        <span className='form-error-message'>{errors.publisher.message}</span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'تاريخ النشر'}</label>\r\n      <input\r\n        name='publicationYear'\r\n        type='number'\r\n        className='form-control'\r\n        placeholder='تاريخ النشر'\r\n        defaultValue={\r\n          book.publicationYear\r\n            ? new Date(book.publicationYear).getFullYear()\r\n            : ''\r\n        }\r\n        ref={register({\r\n          required: 'يرحى إدخال تاريخ النشر',\r\n          min: {\r\n            value: 1500,\r\n            message: 'يرجى إدخال تاريخ صالح',\r\n          },\r\n          max: {\r\n            value: 2021,\r\n            message: 'يرجى إدخال تاريخ صالح',\r\n          },\r\n        })}\r\n      />\r\n      {errors.publicationYear && (\r\n        <span className='form-error-message'>\r\n          {errors.publicationYear.message}\r\n        </span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'لغة الكتاب'}</label>\r\n      <input\r\n        name='language'\r\n        className='form-control'\r\n        defaultValue={book.language}\r\n        ref={register({\r\n          required: 'يرحى إدخال لغة الكتاب',\r\n          maxLength: {\r\n            value: 50,\r\n            message: 'يجب أن لا يتجاوز لغة الكتاب 50 حرفا',\r\n          },\r\n        })}\r\n      />\r\n      {errors.language && (\r\n        <span className='form-error-message'>{errors.language.message}</span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'السعر'}</label>\r\n      <input\r\n        name='price'\r\n        type='number'\r\n        className='form-control'\r\n        placeholder='السعر'\r\n        ref={register({\r\n          required: 'يرحى إدخال السعر',\r\n          maxLength: {\r\n            value: 12,\r\n            message: 'يجب أن لا يتجاوز السعر 12 حرفا',\r\n          },\r\n        })}\r\n      />\r\n      {errors.price && (\r\n        <span className='form-error-message'>{errors.price.message}</span>\r\n      )}\r\n\r\n      <label className='form-group-label'>{'حالة الكتاب'}</label>\r\n      <select\r\n        name='condition'\r\n        className='form-control'\r\n        placeholder='الحالة'\r\n        defaultValue={book.condition || false}\r\n        ref={register({\r\n          required: 'يرحى إدخال الحالة',\r\n          maxLength: {\r\n            value: 255,\r\n            message: 'يجب أن لا تتجاوز الحالة 255 حرفا',\r\n          },\r\n        })}\r\n      >\r\n        {Object.keys(conditions).map((condition, index) => {\r\n          return (\r\n            <option key={index} value={conditions[condition]}>\r\n              {conditions[condition]}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n      {errors.condition && (\r\n        <span className='form-error-message'>{errors.condition.message}</span>\r\n      )}\r\n\r\n      {[\r\n        { label: 'صورة الغلاف', name: 'coverImage' },\r\n        { label: 'صورة 1', name: 'image_1' },\r\n        { label: 'صورة 2', name: 'image_2' },\r\n        { label: 'صورة 3', name: 'image_3' },\r\n      ].map((image, index) => {\r\n        if (image.name === 'coverImage' && book.coverImage) return null;\r\n        return (\r\n          <Fragment key={index}>\r\n            <div className='form-group'>\r\n              <label className='form-group-label'>{image.label}</label>\r\n              <input\r\n                name={image.name}\r\n                type='file'\r\n                className='form-control'\r\n                ref={register({\r\n                  required: 'يرجى ارفاق الصور',\r\n                  validate: (value) => {\r\n                    return (\r\n                      value[0].size < 3e6 &&\r\n                      (value[0].type === 'image/jpeg' ||\r\n                        value[0].type === 'image/png')\r\n                    );\r\n                  },\r\n                })}\r\n              />\r\n            </div>\r\n            {errors[image.name] && (\r\n              <span className='form-error-message'>\r\n                {\r\n                  'يجب أن لا يتعدى حجم الملف 3 ميغابايت، وأن يكون بصيغة JPG أو PNG'\r\n                }\r\n              </span>\r\n            )}\r\n          </Fragment>\r\n        );\r\n      })}\r\n\r\n      {loading ? (\r\n        <img\r\n          className='form-control form-loading-spinner'\r\n          src={loadingSpinner}\r\n          alt='loading'\r\n        />\r\n      ) : (\r\n        <input\r\n          className='form-control form-control-submit'\r\n          type='submit'\r\n          value='إضافة'\r\n        />\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    token: state.auth.token,\r\n  };\r\n};\r\nexport default connect(mapStateToProps, null)(AddBookForm);\r\n","import axios from 'axios';\r\n\r\nconst incrementBookViewCounter = async (book_id) => {\r\n  await axios.put(\r\n    '/api/book/increment_view',\r\n    { book_id },\r\n    { headers: { 'Content-Type': 'application/json' } }\r\n  );\r\n};\r\n\r\nexport default incrementBookViewCounter;\r\n","import React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport GetBookByISBNForm from './GetBookByISBNForm';\r\nimport AddBookForm from './AddBookForm';\r\n\r\nconst AddBook = (props) => {\r\n  const [book, setBook] = useState(null);\r\n  if (!props.isLoggedIn) {\r\n    return <Redirect to='/login' />;\r\n  }\r\n\r\n  if (!book) {\r\n    return <GetBookByISBNForm setBook={setBook} />;\r\n  } else {\r\n    return <AddBookForm book={book} />;\r\n  }\r\n};\r\n\r\nAddBook.propTypes = {\r\n  isLoggedIn: PropTypes.bool.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n  token: PropTypes.string.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isLoggedIn: state.auth.isLoggedIn,\r\n    userId: state.auth.userId,\r\n    token: state.auth.token,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, null)(AddBook);\r\n","import axios from 'axios';\r\n\r\nconst updateUser = async (token, data) => {\r\n  await axios.put('/api/user/edit', data, {\r\n    headers: { 'Content-Type': 'application/json', 'x-auth-token': token },\r\n  });\r\n};\r\n\r\nexport default updateUser;\r\n","import axios from 'axios';\r\nconst getMe = async (token) => {\r\n  try {\r\n    const response = await axios.get(`/api/user/me`, {\r\n      headers: {\r\n        'x-auth-token': token,\r\n      },\r\n    });\r\n\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default getMe;\r\n","import React, { useState, useEffect, Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport getBook from '../utils/getBooks';\r\nimport { connect } from 'react-redux';\r\nimport incrementBookViewCounter from '../utils/incrementBookViewCounter';\r\nimport loadingSpinner from '../img/loading-spinner.gif';\r\nimport updateUser from '../utils/updateUser';\r\n\r\nconst Book = (props) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [book, setBook] = useState();\r\n  const {\r\n    match: {\r\n      params: { book_id },\r\n    },\r\n    userId,\r\n    token,\r\n  } = props;\r\n  useEffect(() => {\r\n    getBook(book_id, token).then((res, err) => {\r\n      if (err) {\r\n        console.error(err.message);\r\n        setLoading(false);\r\n      }\r\n      setBook(res);\r\n      updateUser(token, { view: book_id });\r\n      setLoading(false);\r\n    });\r\n    incrementBookViewCounter(book_id);\r\n  }, [book_id, token]);\r\n\r\n  return (\r\n    <Fragment>\r\n      {loading ? (\r\n        <img src={loadingSpinner} alt='loading' className='page-load' />\r\n      ) : book ? (\r\n        <div className='book-page-container'>\r\n          <div className='book-page-general-info'>\r\n            <img\r\n              src={book.coverImage}\r\n              alt='cover'\r\n              className='book-page-cover'\r\n            />\r\n            <div className='book-page-info'>\r\n              <p className='book-page-info-element'>\r\n                {book.title}, {book.author}\r\n              </p>\r\n              <p className='book-page-info-element'>\r\n                {book.publisher}, {new Date(book.publicationYear).getFullYear()}\r\n              </p>\r\n              <p className='book-page-info-element'>\r\n                {'لغة الكتاب: '}: {book.language}\r\n              </p>\r\n              <p className='book-page-info-element'>{book.description}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className='book-page-copies-container'>\r\n            <h3 className='book-page-copies-header'>{'البائعون'}</h3>\r\n            <div className='book-page-copies'>\r\n              {book.copy.map((copy) => (\r\n                <div className='book-page-copy' key='copy._id'>\r\n                  <div className='book-page-copy-info'>\r\n                    <span>\r\n                      {'البائع: '}\r\n                      <Link to={`/user/${copy.seller._id}`}>\r\n                        {copy.seller.name}\r\n                      </Link>\r\n                    </span>\r\n                    <span>{`الحالة: ${copy.condition}`}</span>\r\n                    <span>{`السعر: ${copy.price} ل.س.`}</span>\r\n                  </div>\r\n                  <div className='book-page-copy-images'>\r\n                    {copy.images.map((image, index) => (\r\n                      <a\r\n                        href={image}\r\n                        target='_blank'\r\n                        rel='noopener noreferrer'\r\n                        className='book-page-copy-image'\r\n                        key={index}\r\n                      >\r\n                        <img src={image} alt='book sample' />\r\n                      </a>\r\n                    ))}\r\n                  </div>\r\n                  {userId !== copy.seller._id ? (\r\n                    <Link\r\n                      className='button book-page-copy-buy-button'\r\n                      to={`/buy/${book_id}/${copy._id}`}\r\n                    >\r\n                      {'شراء'}\r\n                    </Link>\r\n                  ) : (\r\n                    <></>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className='no-books'>{'الكتاب المطلوب غير موجود'}</div>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst mapStatetoProps = (state) => ({\r\n  token: state.auth.token,\r\n  userId: state.auth.userId,\r\n});\r\nexport default connect(mapStatetoProps, null)(Book);\r\n","import axios from 'axios';\r\nconst placeOrder = async (data) => {\r\n  try {\r\n    const response = await axios.post(`/api/order`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-auth-token': data.token,\r\n      },\r\n    });\r\n\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default placeOrder;\r\n","import axios from 'axios';\r\nconst fetchPurchaseOrders = async (token) => {\r\n  try {\r\n    const response = await axios.get(`/api/order/purchase-orders`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-auth-token': token,\r\n      },\r\n    });\r\n\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default fetchPurchaseOrders;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport loadingSpinner from '../img/loading-spinner.gif';\r\nimport fetchBook from '../utils/getBooks';\r\nimport getMe from '../utils/getMe';\r\nimport placeOrder from '../utils/placeOrder';\r\nimport { useForm } from 'react-hook-form';\r\n\r\nconst Order = (props) => {\r\n  const {\r\n    match: {\r\n      params: { book_id, copy_id },\r\n    },\r\n    token,\r\n    isLoggedIn,\r\n  } = props;\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [isPosting, setIsPosting] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState();\r\n  const [book, setBook] = useState();\r\n  const [copyIndex, setCopyIndex] = useState();\r\n  const [buyer, setBuyer] = useState();\r\n  useEffect(() => {\r\n    if (!isLoggedIn) {\r\n      swal({\r\n        icon: 'warning',\r\n        text: 'يتوجيب عليك تسجيل الدخول أولا',\r\n        buttons: 'موافق',\r\n      }).then(() => {\r\n        setLoading(false);\r\n      });\r\n    } else\r\n      fetchBook(book_id).then((data) => {\r\n        if (!data) {\r\n          setError('حدث خطأ أثناء التحميل، يرجى المحاولة لاحقا');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        setBook(data);\r\n        setCopyIndex(data.copy.findIndex((elem) => elem._id === copy_id));\r\n        getMe(token).then((data) => {\r\n          if (!data) {\r\n            setError('حدث خطأ أثناء التحميل، يرجى المحاولة لاحقا');\r\n            setLoading(false);\r\n            return;\r\n          }\r\n          setBuyer(data);\r\n          setLoading(false);\r\n        });\r\n      });\r\n  }, [book_id, isLoggedIn, token, copy_id]);\r\n\r\n  const { register, handleSubmit, errors, watch } = useForm();\r\n  const submit = (data) => {\r\n    data.token = token;\r\n    data.seller_id = book.copy[copyIndex].seller._id;\r\n    data.book_id = book_id;\r\n    data.copy_id = copy_id;\r\n    data.amount = book.copy[copyIndex].price;\r\n\r\n    placeOrder(data).then((res, err) => {\r\n      setIsPosting(true);\r\n      if (err) {\r\n        swal({\r\n          icon: 'error',\r\n          title: 'فشلت العملية',\r\n          text: err,\r\n          buttons: 'العودة',\r\n        });\r\n      }\r\n      swal({\r\n        icon: 'success',\r\n        title: 'لقد قمت بشراء الكتاب',\r\n        text:\r\n          'سوف يقوم البائع بتوصيل الكتاب، يمكنك استعراض حالة الطلب في صفحة إدارة طلباتي',\r\n        buttons: 'موافق',\r\n      }).then(() => {\r\n        setIsPosting(false);\r\n        setSuccess(true);\r\n      });\r\n    });\r\n    setIsPosting(true);\r\n  };\r\n  if (loading)\r\n    return (\r\n      <div className='order-page-container'>\r\n        {loading && (\r\n          <img src={loadingSpinner} alt='loading' className='page-load' />\r\n        )}\r\n      </div>\r\n    );\r\n\r\n  if (error) {\r\n    return (\r\n      <div className='order-page-container'>\r\n        <h3 className='order-page-header'>{error}</h3>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isLoggedIn) {\r\n    return <Redirect to='/login' />;\r\n  }\r\n\r\n  if (success) {\r\n    return <Redirect to='/' />;\r\n  }\r\n\r\n  return (\r\n    <div className='order-page-container'>\r\n      <h3 className='order-page-header'>{'تفاصيل الطلب'}</h3>\r\n      <div className='order-page-info'>\r\n        <div className='order-page-info-element'>\r\n          <span className='order-page-info-element-label'>{'الكتاب: '}</span>\r\n          <span className='order-page-info-element-data'>{`${book.title}, ${book.author}`}</span>\r\n        </div>\r\n        <div className='order-page-info-element'>\r\n          <span className='order-page-info-element-label'>{'البائع: '}</span>\r\n          <span className='order-page-info-element-data'>{`${book.copy[copyIndex].seller.name}`}</span>\r\n        </div>\r\n        <div className='order-page-info-element'>\r\n          <span className='order-page-info-element-label'>\r\n            {'حالة الكتاب: '}\r\n          </span>\r\n          <span className='order-page-info-element-data'>{`${book.copy[copyIndex].condition}`}</span>\r\n        </div>\r\n        <div className='order-page-info-element'>\r\n          <span className='order-page-info-element-label'>{'السعر: '}</span>\r\n          <span className='order-page-info-element-data'>{`${book.copy[copyIndex].price}`}</span>\r\n        </div>\r\n        <div className='order-page-info-element'>\r\n          <span className='order-page-info-element-label'>\r\n            {'اسم المشتري: '}\r\n          </span>\r\n          <span className='order-page-info-element-data'>{`${buyer.name}`}</span>\r\n        </div>\r\n        <div className='order-page-info-element'>\r\n          <span className='order-page-info-element-label'>\r\n            {'رقم الهاتف: '}\r\n          </span>\r\n          <span className='order-page-info-element-data ltr'>{`${buyer.phone}`}</span>\r\n        </div>\r\n        <div className='order-page-info-element'>\r\n          <span className='order-page-info-element-label'>\r\n            {'عنوان الشحن: '}\r\n          </span>\r\n          <span className='order-page-info-element-data'>\r\n            {`${buyer.address.street}, ${buyer.address.district}, ${buyer.address.city}, ${buyer.address.country}`}\r\n            <br />\r\n            {`وصف العنوان: ${buyer.address.description}`}\r\n            <br />\r\n            {`الرمز البريدي: ${buyer.address.postal}`}\r\n          </span>\r\n          <br />\r\n        </div>\r\n      </div>\r\n      <div className='order-page-payment-container'>\r\n        <form\r\n          className='order-page-payment-form form'\r\n          onSubmit={handleSubmit(submit)}\r\n        >\r\n          <h3 className='form-title'>{'معلومات الدفع'}</h3>\r\n          <label className='form-group-label'>{'طريقة الدفع'}</label>\r\n          <select\r\n            name='paymentMethod'\r\n            className='form-control'\r\n            defaultValue='الرجاء اختيار إحدى الطرق'\r\n            ref={register({\r\n              required: 'يجب اختيار طريقة دفع',\r\n              validate: (value) => value !== 'الرجاء اختيار إحدى الطرق',\r\n            })}\r\n          >\r\n            <option selected disabled>\r\n              {'الرجاء اختيار إحدى الطرق'}\r\n            </option>\r\n            <option value='paypal'>PayPal</option>\r\n          </select>\r\n          {errors.paymentMethod && (\r\n            <span className='form-error-message'>\r\n              {errors.paymentMethod.message}\r\n            </span>\r\n          )}\r\n          {watch('paymentMethod') === 'paypal' && (\r\n            <>\r\n              <div className='form-group'>\r\n                <label className='form-group-label'>{'حساب Paypal'}</label>\r\n                <input\r\n                  name='paymentAccount'\r\n                  className='form-control'\r\n                  type='email'\r\n                  ref={register({\r\n                    required: 'الرجاء إدخال حساب Paypal',\r\n                    pattern: {\r\n                      value: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n                      message: 'يجب إدخال بريد إلكتروني صالح',\r\n                    },\r\n                  })}\r\n                />\r\n              </div>\r\n              {errors.paymentAccount && (\r\n                <span className='form-error-message'>\r\n                  {errors.paymentAccount.message}\r\n                </span>\r\n              )}\r\n            </>\r\n          )}\r\n          {isPosting ? (\r\n            <img\r\n              className='form-control form-loading-spinner'\r\n              src={loadingSpinner}\r\n              alt='loading'\r\n            />\r\n          ) : (\r\n            <input\r\n              className='form-control form-control-submit'\r\n              type='submit'\r\n              value='تأكيد الطلب'\r\n            />\r\n          )}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isLoggedIn: state.auth.isLoggedIn,\r\n  token: state.auth.token,\r\n});\r\nexport default connect(mapStateToProps, null)(Order);\r\n","import axios from 'axios';\r\nconst fetchPaymentOrders = async (token) => {\r\n  try {\r\n    const response = await axios.get(`/api/order/payment-orders`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-auth-token': token,\r\n      },\r\n    });\r\n\r\n    if (response.status === 200) {\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default fetchPaymentOrders;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport loadingSpinner from '../img/loading-spinner.gif';\r\nimport fetchPurchaseOrders from '../utils/fetchPurchaseOrders';\r\n\r\nconst PurchaseOrders = (props) => {\r\n  const { token, isLoggedIn } = props;\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [orders, setOrders] = useState();\r\n  const [error, setError] = useState();\r\n  useEffect(() => {\r\n    if (!isLoggedIn) {\r\n      swal({\r\n        icon: 'warning',\r\n        text: 'يتوجيب عليك تسجيل الدخول أولا',\r\n        buttons: 'موافق',\r\n      }).then(() => {\r\n        setLoading(false);\r\n      });\r\n    } else {\r\n      fetchPurchaseOrders(token).then((data) => {\r\n        if (!data) {\r\n          setError('حدث خطأ أثناء التحميل، يرجى المحاولة لاحقا');\r\n          setLoading(false);\r\n        } else {\r\n          setOrders(data);\r\n          setLoading(false);\r\n        }\r\n      });\r\n    }\r\n  }, [isLoggedIn, token]);\r\n\r\n  if (loading)\r\n    return <img src={loadingSpinner} alt='loading' className='page-load' />;\r\n\r\n  if (!isLoggedIn) {\r\n    return <Redirect to='/login' />;\r\n  }\r\n\r\n  if (error) {\r\n    return <h3 className='order-page-header'>{error}</h3>;\r\n  }\r\n\r\n  if (!orders || orders.length === 0) {\r\n    return <h3 className='order-page-header'>{'لا يوجد لديك طلبات شراء'}</h3>;\r\n  }\r\n  return <div>{JSON.stringify(orders)}</div>;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isLoggedIn: state.auth.isLoggedIn,\r\n  token: state.auth.token,\r\n});\r\nexport default connect(mapStateToProps, null)(PurchaseOrders);\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport loadingSpinner from '../img/loading-spinner.gif';\r\nimport fetchPaymentOrders from '../utils/fetchPaymentOrders';\r\n\r\nconst PurchaseOrders = (props) => {\r\n  const { token, isLoggedIn } = props;\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [orders, setOrders] = useState();\r\n  const [error, setError] = useState();\r\n  useEffect(() => {\r\n    if (!isLoggedIn) {\r\n      swal({\r\n        icon: 'warning',\r\n        text: 'يتوجيب عليك تسجيل الدخول أولا',\r\n        buttons: 'موافق',\r\n      }).then(() => {\r\n        setLoading(false);\r\n      });\r\n    } else {\r\n      fetchPaymentOrders(token).then((data) => {\r\n        if (!data) {\r\n          setError('حدث خطأ أثناء التحميل، يرجى المحاولة لاحقا');\r\n          setLoading(false);\r\n        } else {\r\n          setOrders(data);\r\n          setLoading(false);\r\n        }\r\n      });\r\n    }\r\n  }, [isLoggedIn, token]);\r\n\r\n  if (loading)\r\n    return <img src={loadingSpinner} alt='loading' className='page-load' />;\r\n\r\n  if (!isLoggedIn) {\r\n    return <Redirect to='/login' />;\r\n  }\r\n\r\n  if (error) {\r\n    return <h3 className='order-page-header'>{error}</h3>;\r\n  }\r\n\r\n  if (!orders || orders.length === 0) {\r\n    return <h3 className='order-page-header'>{'لا يوجد لديك طلبات شراء'}</h3>;\r\n  }\r\n  return <div>{JSON.stringify(orders)}</div>;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isLoggedIn: state.auth.isLoggedIn,\r\n  token: state.auth.token,\r\n});\r\nexport default connect(mapStateToProps, null)(PurchaseOrders);\r\n","// modules\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\r\n\r\n// helpers\r\nimport getSections from './utils/getSections';\r\nimport store from './redux/store';\r\n\r\n// components\r\nimport Header from './components/Layout/Header';\r\nimport Navbar from './components/Layout/Navbar';\r\nimport Footer from './components/Layout/Footer';\r\nimport Home from './components/Public/Home';\r\nimport AboutUs from './components/Public/AboutUs';\r\nimport Policy from './components/Public/Policy.js';\r\n\r\nimport Login from './components/Login';\r\nimport Register from './components/Register';\r\nimport UserBooks from './components/UserBooks';\r\nimport AddBook from './components/AddBook';\r\nimport Book from './components/Book';\r\nimport Order from './components/Order';\r\nimport GetBooks from './components/SubComponents/GetBooks';\r\nimport PurchaseOrders from './components/PurchaseOrders';\r\nimport PaymentOrders from './components/PaymentOrders';\r\n\r\n// static\r\nimport './stylesheet/App.css';\r\nimport loadingSpinner from './img/ball-spinner.gif';\r\n\r\nconst App = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [sections, setSections] = useState(null);\r\n  useEffect(() => {\r\n    getSections().then((data, error) => {\r\n      if (error) {\r\n        setLoading(false);\r\n      }\r\n      setSections(data);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <img src={loadingSpinner} alt='loading' className='loading-full-page' />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Provider store={store}>\r\n      <Router>\r\n        <Header />\r\n        <Navbar sections={sections} />\r\n        <div className='container'>\r\n          <Switch>\r\n            <Route exact path='/' component={Home} />\r\n            {/*<Route exact path='/login' component={Login} />\r\n            <Route exact path='/register' component={Register} />\r\n            <Route exact path='/user/books' component={UserBooks} />\r\n            <Route exact path='/user/books/addbook' component={AddBook} />\r\n            <Route exact path='/section/:query' component={GetBooks} />\r\n            <Route exact path='/search/:query/' component={GetBooks} />\r\n            <Route exact path='/book/:book_id' component={Book} />\r\n            <Route path='/buy/:book_id/:copy_id' component={Order} />\r\n            <Route exact path='/user/orders' component={PurchaseOrders} />\r\n  <Route exact path='/user/sales' component={PaymentOrders} />*/}\r\n            <Route exact path='/aboutus' component={AboutUs} />\r\n            <Route exact path='/policy' component={Policy} />\r\n          </Switch>\r\n        </div>\r\n        <Footer />\r\n      </Router>\r\n    </Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport './stylesheet/index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}